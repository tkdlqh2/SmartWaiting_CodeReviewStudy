# Smart Waiting 서비스 만들기  

본 문서는 음식점 예약 서비스 프로젝트의 요구사항을 정리한 문서입니다.

### 프로젝트의 목적
본 프로젝트를 통해 모든 유저들은 원하는 음식점을 미리 예약할 수 있고
음식점 사장님들은 유저들의 온라인 예약을 처리할 수 있다.
태블릿으로 웹을 키고 음식점 앞에 거치해서 예약을 받는 형태로 서비스를 제공해서 현장에서 기다리는 인원도 웹으로 예약을 받도록 한다.



###주요 Entity와 그 파라미터들

**User**
- 이메일, 비밀번호, 핸드폰 번호 (회원 기본 정보)
- AuthKey, AuthDate (인증을 위한 정보)
- UserStatus
  - UNAPPROVED, APPROVED, STOP
- IsAdmin(등급), isReserving(음식점을 예약했는지 여부)

**Market**
- 음식점 이름, 대표자명, 사업자 등록번호, 음식점 위치, 음식점 유형 (등록에 필요한 정보)
- 운영시간(오픈 시작시간~마감 시간)과 요일, 최대 예약 가능 인원, 음식점 사진 (운영에 필요한 정보)
- MARKET_STATUS(서비스에 등록되는 상태)
  - UNAPPROVED, OPEN, CLOSED
- isOpen(boolean 현재 가게가 운영을 하고 있는지), reservable(boolean 예약이 가능한지)

**Food**
- 소속 Market
- 음식 이름, 가격, 사진

**RESERVE**
- Market, 예약인원
- 예약 상태
  - UNAPPROVED, APPROVED, CANCEL, END

### 프로젝트의 기능

**User 회원가입과 로그인**
- User는 회원가입을 할 수 있다
    - 회원가입시 이메일과 비밀번호, 핸드폰 번호 정보가 필요하다
    - 회원가입시 이미 회원가입된 이메일로 회원가입을 시도하면 에러를 발생한다
    - 비밀번호 정책에 맞지 않는 경우 에러를 발생한다.
    - 이미 등록된 핸드폰 번호의 경우 에러를 발생한다.
  
- USER는 회원가입의 정보를 이용하여 로그인을 할수 있다
    - 로그인시 회원가입한적 없는 이메일을 이용하여 로그인을 시도하면 에러가 발생한다
    - 로그인시 비밀번호가 일치하지 않는다면 에러가 발생한다.

**USER 비밀번호 재설정하기**
- USER는 비밀번호를 재설정할 수 있다.
  - User 이메일로 재설정 링크를 보낸다.

**User 회원 정보 변경 및 탈퇴**

- 회원 비밀번호를 변경할 수 있다.
- 회원 전화번호를 변경할 수 있다.
- 회원 탈퇴를 할 수 있다.
  - 만약 예약 중인 상태라면 회원 탈퇴를 할 수 없다.
  
**User : Market List**

- 처음에 지역을 선택해야 Market List을 볼 수 있다.
- Market List은 로그인을 하지 않아도 모든 유저가 볼 수 있다.
- 음식점 이름, 사진, 예상 대기시간, 기다리는 팀 수를 화면에 보여준다. 

- 오늘 영업하는지, 현재 영업 중 인지, 음식 종류로 추가적으로 필터링할 수 있다.
- (정렬의 방법은 차차 생각)


**User : Market Detail**

- 음식점 상세페이지에서는 음식점 위치, 메뉴와 가격, 음식점과 음식의 사진 등의 상세 정보를 보여준다.
- 또한, 예약 가능 시간(음식점 영업 시간),예약 대기열에 대한 정보, 예약 버튼을 표시한다.
- 예약은 로그인한 유저만 할 수 있다. 
  - 유저가 로그인하지 않았다면 에러를 발생한다
  - 음식점 예약은 최대 1개만 가능하며 이미 예약을 하고 있는데 예약을 하려고 하면 에러를 발생한다.
- 삭제된 음식점을 유저가 접근한다면 에러를 발생시킨다.

**예약 페이지**

- 방문 인원을 설정한다.
- 설정된 최대 방문 인원(MARKET에서 설정) 이하로 방문 인원을 설정할 수 있다.


**User MY 페이지**

- 예약된 음식점이 없는 경우 음식점 목록으로 가는 링크를 띄운다.
- 예약된 음식점이 있는 경우 음식점의 대기 상태를 출력한다.
  - 현재 예약된 음식점을 취소할 수 있다.

- 회원 정보 변경 및 탈퇴 페이지로 이동할 수 있다.
- Market에서 고객의 예약을 처리한 경우, 알람을 받는다.

**음식점 등록(점주 가입)**

- 음식점 이름, 대표자명, 사업자 등록번호, 음식점 위치가 필요하다.
- 오픈시간, 마감 시간, 최대 예약 가능 인원, 음식점 사진이 필요하다.
- 음식점 유형 선택이 필요하다.

**음식점 설정 변경**

- 관리자로부터 음식점을 승인 받아야 음식점 설정 변경이 가능하다.
- 예약 가능 시작 시간, 예약 가능 마감 시간, 최대 예약 가능 인원, 음식점 사진을 변경할 수 있다.
- 음식점 메뉴(FOOD)를 등록할 수 있다.
  - 메뉴는 가격, 이름, 사진으로 구성된다.
- 음식점 메뉴를 수정할 수 있다.
- 음식점 메뉴를 삭제할 수 있다.

**음식점 예약 관리 페이지**
- 오픈 시작을 누르면 오픈할 수 있다.
- 음식점 예약 시작 버튼을 누르면 예약을 받아올 수 있다.(구분한 이유는 식당에 여유가 있어서 줄을 설 필요가 없을 수도 있어서)
- 예약을 처리할 수 있다.
  - UNAPPROVED -> CANCEL
  - UNAPPROVED -> APPROVED
  - APPROVED -> END
- 음식점 예약 마감버튼을 누르면 예약을 더이상 안 받을 수 있다.   

**(음식점 현장 예약용 추가 페이지)**
- 이름과 전화번호, 인원 수를 등록하면 예약을 등록할 수 있다.

**ADMIN 회원 관리**
- 비밀번호 재설정 이메일을 보낼 수 있다.
- 회원 상태를 수정할 수 있다.
- 다른 관리자 여부를 지정할 수 있다.

**ADMIN 식당 관리**
- 식당의 상태를 변경할 수 있다.

### 사용 기술스택
- SpringBoot
- Java
- MySQL

### 프로젝트 단계별 구현
- 1단계
  - 예약처리와 관련 없는 기본적인 웹페이지를 구성한다.
- 2단계
  - 예약처리와 관련된 기능들을 처리한다.



